$Id: $

Module API - GCMS


zum aufbau ist folgendes zu sagen
---------------------------------

module gehoeren stets in das verzeichnis "modules", die dazugehoerigen templatefiles 
gehoeren in das zentrale "templates" verzeichnis. natuerlich einem bestimmten template 
zugeordnet. ordner und dateinamen werden klein geschrieben. zu den codingstandards 
sollte man sich mal vorhandene dateien vornehmen. 

----------------------------------------------------------------------------------------------------

die verzeichnisstruktur eines moduls
------------------------------------

/modules
 |
 +-- (configs)
 |   +- base.php
 |   
 +-- (db)
 |   +- mysql.php
 |
 +-- (languages)
 |   +-- deutsch
 |   |   +- base.php
 |   |
 |   +-- english
 |       +-- base.php
 |
 +-- plugins
 |   +-- index.php
 |
 +- index.php
 |
 +- info.txt

die verzeichnisse configs, db und languages sind nicht zwingend notwendeig.
wenn aber config und language files benoetigt werden sollte als erstes ein 
file namens base.php angelegt werden, dieses wird automatisch beim modul laden 
included. zu einem spaeteren zeitpunkt koennen problemlos weitere config oder 
language files geladen werden. beim db wrapper muss der dateiname dem gewaehlten 
db typ entsprechen, fuer den anfang sollte das in der regel mysql sein. den 
aufbau von info.txt sollte man bestehenden files entnehmen.

----------------------------------------------------------------------------------------------------

verfuegbare wichtige globale funktionen
---------------------------------------

 - append_sid($url, $non_html_amp = false)   ist auf jeden link anzuwenden
 	bsp. append_sid(GCMS_RELATIVE_PATH . '/index.php?module=imprint')   fuegt automatisch session ids an wenn noetig

 - load_config($module = false, $configfile = false)   zum laden separater config files
 	bsp. load_config('news', 'comments')   laedt /modules/news/configs/comments.php in $GCMS['CONFIG']['NEWS'] (syntax config file bestehenden configfiles entnehmen)

 - load_language($langfile = false, $module = false)   zum laden separater language files
 	bsp. load_language('comments', 'news')   laedt /modules/news/languages/{SPRACHE}/comments.php

 - load_userdata($uid = false)   zum laden von userdaten
 	bsp. load_userdata(5)   laedt die daten des users mit der id 5 und gibts als array zurueck
	
 - generate_pagination($base_url, $num_items, $per_page, $start_item, $add_prevnext_text = true)   generierung der seitenlinks
 	bsp. generate_pagination('index.php?module=news', 20, 5, 1)   gibt seitenlinks als string zurueck (seite << 1, 2, 3, 4 >>)
	
 - generate_pagenumber($start, $total, $per_page)   zur generierung von seitennummern
 	bsp. generate_pagenumber(1, 50, 10)   gibt "seite 1 von 5" als string zurueck

----------------------------------------------------------------------------------------------------

wichtige globale variablen und konstanten
-----------------------------------------

 - $GCMS['DB'] alle daten bezueglich db connection
 	- $GCMS['DB']['DATA'] connection daten (typ, host, user, passwort, datenbank, prefix)
	- $GCMS['DB']['LINK'] db connection id (id der bestehenden connection, braucht jedes query)
	- $GCMS['DB']['COUNTER'] query counter (sollte bei jedem query inkrementiert werden)
	- $GCMS['DB']['DATABASE'] lediglich eine ueberpruefung ob die datenbank ausgewaehlt wurde

 - $GCMS['CONFIG'] configfile abhaengiges array (syntax config file bestehenden configfiles entnehmen)
     - $GCMS['CONFIG']['MODULENAME'] anstelle "MODULENAME" der name des moduls das geladen wurde (den modulnamen immer in GROSSBUCHSTABEN)

 - $GCMS['LANG'] sprachabhaengige textpassagen aus lang files geladen (syntax lang file bestehenden langfiles entnehmen)
     - $GMCS['LANG']['MODULENAME'] anstelle "MODULENAME" der name des moduls das geladen wurde (den modulnamen immer in GROSSBUCHSTABEN)

 - $GCMS['TEMPLATE'] direkt das template objekt (engine syntax siehe TEMPLATES)

 - $GCMS['USER'] alle daten zum gerade eingeloggten user (gast/registriert)
 	- $GCMS['USER']['feldname'] hier ist jedes feld der user tabelle ueber den feldnamen abrufbar (gross- und kleinschreibung beachten)

 - $GCMS['ROOTMODULE'] alle rootmodul daten (aus db)
 	- $GCMS['ROOTMODULE']['feldname'] hier ist jedes feld der categories tabelle ueber den feldnamen abrufbar (gross- und kleinschreibung beachten)
	- $GCMS['ROOTMODULE']['AUTH'] array mit authorisierungsdaten fuer den eingeloggten user

 - $GCMS['SUBMODULE'] alle submodul daten (aus db), nur wenn root modul geladen wurde und darin das submodule (mit rootid) geladen wurde
 	- $GCMS['SUBMODULE']['feldname'] hier ist jedes feld der categories tabelle ueber den feldnamen abrufbar (gross- und kleinschreibung beachten)
	- $GCMS['SUBMODULE']['AUTH'] array mit authorisierungsdaten fuer den eingeloggten user

 - $GCMS['GENTIME'] platzhalter bezueglich generierungszeiten
     - $GCMS['GENTIME']['starttime'] timestamp vom startzeitpunkt des abarbeitens der seite
